<!DOCTYPE html>
<html lang="en" class="theme">

<head>
    <title>Video - Video Player</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <meta name="theme-color" content="#000">
    <meta name="application-name" content="Notes">
    <meta name="description" content="Video Player App">
    <meta name="keywords" content="note,offline,web,app">
    <meta name="author" content="Rohit Parida">
    <link rel="manifest" href="https://rohitparida27.github.io/video/manifest.json">
    <link href="css/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?lang=en&amp;family=Product+Sans">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <link rel="icon" href="img/icon-48.png">
    <script src="ripple.js"></script>
</head>

<body>
    <div class="vessel">
        <!--______________________________APPBAR--
        <div class="appbar">
            <h1 class="title">Push<span class="highlight">Up</span></h1>
        </div>
        <!--______________________________APPBAR_END-->
        <!--______________________________CONTENT-->
        <div class="content">
            <div class="video-container">
                <div id="contrastFilter"></div>
                <video src="" controls autoplay="true" preload="auto" poster="https://data.whicdn.com/images/201361048/original.gif" id="element"></video>
            </div>
            <div class="input-container">
                <!-- <div id="contrastSlider">
                    <input id="contrast" type="range" value="0.5" max="1" min="0" step="0.01">
                </div> -->

                <!-- <span class="path data">Name</span>
                <span class="size data">Size</span> -->
                <h2 id="name" class="data"></h2>
                <p id="size" class="data"></p>
                <p id="type" class="data"></p>
                <div class="botmbar">

                    <div id="message"></div>
                    <input type="file" name="upload" id="receiver" class="fname receiver" title="Choose a file to upload" hidden>

                    <!-- <input type="file" accept="video/*" id="receiver" class="receiver" name="upload" style="display: none;"> -->
                    <label for="receiver" class="ripple">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
                                <path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/>
                                <path d="M0 0h24v24H0z" fill="none"/>
                        </svg>
                    </label>
                    <input type="text" id="newURL" onkeyup="success()" placeholder="Enter URL">
                    <button id="send" type="submit" onclick="changeURL()" disabled></button>
                    <label class="send ripple" for="send">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            <path d="M0 0h24v24H0z" fill="none"/>
                        </svg>
                    </label>
                </div>
            </div>
        </div>
        <!--______________________________CONTENT_END-->
    </div>

    </script>
    <script src="js/jquery.min.js"></script>
    <script src="js/app.js"></script>
</body>
<script>
    // $('.fname').change(function() {
    //
    //     var f = this.files[0];
    //     var name = f.name;
    //
    //     $('.path').text(name);
    //
    // });
    //
    // $('.fsize ').change(function() {
    //
    //     var f = this.files[0];
    //     var size = f.size;
    //
    //     $('.size').text(size);
    //
    // });



    //check if browser supports file api and filereader features
    if (window.File && window.FileReader && window.FileList && window.Blob) {

        //this is not completely neccesary, just a nice function I found to make the file size format friendlier
        //http://stackoverflow.com/questions/10420352/converting-file-size-in-bytes-to-human-readable
        function humanFileSize(bytes, si) {
            var thresh = si ? 1000 : 1024;
            if (bytes < thresh) return bytes + ' B';
            var units = si ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'] : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];
            var u = -1;
            do {
                bytes /= thresh;
                ++u;
            } while (bytes >= thresh);
            return bytes.toFixed(1) + ' ' + units[u];
        }


        //this function is called when the input loads an image
        function renderImage(file) {
            var reader = new FileReader();
            reader.onload = function(event) {
                the_url = event.target.result
                //of course using a template library like handlebars.js is a better solution than just inserting a string
                $('#preview').html("<img src='" + the_url + "' />")
                $('#name').html(file.name)
                $('#size').html(humanFileSize(file.size, "MB"))
                $('#type').html(file.type)
            }

            //when the file is read it triggers the onload event above.
            reader.readAsDataURL(file);
        }


        //this function is called when the input loads a video
        function renderVideo(file) {
            var reader = new FileReader();
            reader.onload = function(event) {
                the_url = event.target.result
                //of course using a template library like handlebars.js is a better solution than just inserting a string
                $('#data-vid').html("<video width='400' controls><source id='vid-source' src='" + the_url + "' type='video/mp4'></video>")
                $('#name').html(file.name)
                $('#size').html(humanFileSize(file.size, "MB"))
                $('#type').html(file.type)

            }

            //when the file is read it triggers the onload event above.
            reader.readAsDataURL(file);
        }



        //watch for change on the
        $("#the-photo-file-field").change(function() {
            console.log("photo file has been chosen")
            //grab the first image in the fileList
            //in this example we are only loading one file.
            console.log(this.files[0].size)
            renderImage(this.files[0])

        });

        $("#receiver").change(function() {
            console.log("video file has been chosen")
            //grab the first image in the fileList
            //in this example we are only loading one file.
            console.log(this.files[0].size)
            renderVideo(this.files[0])

        });

    } else {

        alert('The File APIs are not fully supported in this browser.');

    }




    function success() {
        if (document.getElementById("newURL").value === "") {
            document.getElementById('send ').disabled = true;
        } else {
            document.getElementById('send ').disabled = false;
        }
    }
</script>

</html>